{% extends "base.html" %}

{% block title %}Dashboard - LifeOS{% endblock %}

{% block content %}
<div class="dashboard">
    <header class="page-header">
        <h1>Dashboard</h1>
        <p class="subtitle">{{ today.strftime('%A, %B %d, %Y') }}</p>
    </header>

    <!-- Quick Stats -->
    <section class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon">ğŸ¯</div>
            <div class="stat-info">
                <h3>{{ projects|length }}</h3>
                <p>Active Projects</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">âœ…</div>
            <div class="stat-info">
                <h3>{{ tasks_completed_today }}</h3>
                <p>Tasks Completed Today</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">ğŸ“‹</div>
            <div class="stat-info">
                <h3>{{ tasks_due_today }}</h3>
                <p>Tasks Due Today</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">ğŸ </div>
            <div class="stat-info">
                <h3>{{ areas|length }}</h3>
                <p>Active Areas</p>
            </div>
        </div>
    </section>

    <!-- Active Projects -->
    <section class="dashboard-section">
        <div class="section-header">
            <h2>Active Projects</h2>
            <a href="{{ url_for('projects') }}" class="view-all">View All â†’</a>
        </div>
        <div class="project-cards">
            {% for project in projects %}
            <div class="project-card">
                <h3>{{ project.title }}</h3>
                {% if project.metadata.get('target_date') %}
                <p class="project-date">Due: {{ project.metadata.target_date }}</p>
                {% endif %}
                {% if project.metadata.get('status') %}
                <span class="status-badge status-{{ project.metadata.status.lower() }}">
                    {{ project.metadata.status }}
                </span>
                {% endif %}
                <a href="{{ url_for('project_detail', filename=project.filename) }}" class="view-project">View Details â†’</a>
            </div>
            {% else %}
            <p class="empty-state">No active projects</p>
            {% endfor %}
        </div>
    </section>

    <!-- Active Areas -->
    <section class="dashboard-section">
        <div class="section-header">
            <h2>Active Areas</h2>
            <a href="{{ url_for('areas') }}" class="view-all">View All â†’</a>
        </div>
        <div class="area-list">
            {% for area in areas %}
            <div class="area-item">
                <h3>{{ area.title }}</h3>
                {% if area.metadata.get('status') %}
                <span class="status-badge status-{{ area.metadata.status.lower() }}">
                    {{ area.metadata.status }}
                </span>
                {% endif %}
                <a href="{{ url_for('area_detail', filename=area.filename) }}" class="view-area">View â†’</a>
            </div>
            {% else %}
            <p class="empty-state">No active areas</p>
            {% endfor %}
        </div>
    </section>

    <!-- Today's Plan Preview -->
    {% if today_plan %}
    <section class="dashboard-section">
        <div class="section-header">
            <h2>Today's Plan</h2>
            <a href="{{ url_for('daily_plan') }}" class="view-all">View Full Plan â†’</a>
        </div>
        <div class="plan-preview">
            {% if today_plan['one_thing'] %}
            <div class="plan-item">
                <strong>ONE THING:</strong> {{ today_plan['one_thing'] }}
            </div>
            {% endif %}
            {% if today_plan['faith_goal'] %}
            <div class="plan-item">
                <strong>Faith Goal:</strong> {{ today_plan['faith_goal'] }}
            </div>
            {% endif %}
        </div>
    </section>
    {% endif %}

    <!-- Quick Actions -->
    <section class="dashboard-section">
        <h2>Quick Actions</h2>
        <div class="quick-actions">
            <a href="{{ url_for('daily_plan') }}" class="action-btn">ğŸ“… View Daily Plan</a>
            <a href="{{ url_for('tasks') }}" class="action-btn">âœ… Manage Tasks</a>
            <a href="{{ url_for('history') }}" class="action-btn">ğŸ“ˆ View History</a>
        </div>
    </section>
</div>
{% endblock %}

