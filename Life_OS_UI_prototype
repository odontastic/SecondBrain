<think>User wants to create files on their local hard drive. As ChatGPT, we cannot directly create files on the user's machine. We need to provide instructions or a script that they can run to create the files. We could provide a shell script that creates the folder structure and all files with the content. Or we can provide a zip file. But we can only provide text. So we can give a script.

We should provide a comprehensive bash script that, when run, will create the LifeOS-Desktop directory, write all the files, and install dependencies. Then they can run `npm install` etc.

We need to explain how to run it.

We need to mention that the script will create `LifeOS-Desktop` or similar. Provide the script content.

We should also provide the `.env` file creation instructions.

We also should give them a `README.md`.

We need to provide the script and instructions. Also mention that they need Node.js and npm installed.

We also need to provide the script that creates directories and files with the content. Use `cat > file <<'EOF'` blocks.

So the script will:

- Create lifeos-desktop directory
- Inside, create package.json, .env, README.md, src folder, etc.
- Write all the files with content.

We may also provide a separate script to run `npm install`.

We can embed the content of all files in the script using `cat > file <<'EOF'`.

We have to be careful with quoting and escaping.

We'll provide a script named `setup_lifeos.sh`.

We'll instruct the user to run `chmod +x setup_lifeos.sh && ./setup_lifeos.sh`.

We can also instruct to create the `LifeOS` directory in home, but the script can create it if not present.

Also we need to create the `.gitignore` file.

We also need to include the package.json content we wrote earlier.

Also provide a .env file placeholder.

Also provide the README.

Ok, let's craft.

</think>Below is a **single Bash script** that will create the entire prototype on your local machine.
All the files we discussed (Electron main, React components, utility modules, `package.json`, `.env`, etc.) are generated automatically.

> **Prerequisites**
> • Node ≥ 18 (npm is bundled)
> • Git (optional, for version‑control)
> • `curl` or `wget` (we use `curl` to download the starter template)

---

## 1.  Create the script

```bash
# create a file called setup_lifeos.sh in any directory you like
cat > setup_lifeos.sh <<'EOF'
#!/usr/bin/env bash
set -euo pipefail

# ---------- 1️⃣  Where everything will live ----------
ROOT_DIR="$HOME/LifeOS-Desktop"   # <‑ change if you prefer a different folder
mkdir -p "$ROOT_DIR"
cd "$ROOT_DIR"

# ---------- 2️⃣  Create the basic skeleton ----------
mkdir -p src/renderer/utils
mkdir -p src/renderer/components
mkdir -p src/renderer/assets

# ---------- 3️⃣  Write package.json ----------
cat > package.json <<'PKG'
{
  "name": "lifeos-desktop",
  "version": "1.0.0",
  "description": "Electron + React prototype for Life OS",
  "main": "src/main.js",
  "scripts": {
    "start": "electron .",
    "build": "electron-builder"
  },
  "keywords": ["lifeos", "electron", "react", "openrouter"],
  "author": "Your Name",
  "license": "MIT",
  "dependencies": {
    "axios": "^1.7.2",
    "chokidar": "^4.0.1",
    "node-cron": "^3.0.3",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-markdown": "^8.0.7"
  },
  "devDependencies": {
    "electron": "^32.0.0",
    "electron-builder": "^24.6.3"
  }
}
PKG

# ---------- 4️⃣  .env (placeholder) ----------
cat > .env <<'ENV'
# Put your OpenRouter API key here
OPENROUTER_API_KEY=sk-xxxxxxxxxxxxxxxxxxxx
ENV

# ---------- 5️⃣  .gitignore ----------
cat > .gitignore <<'IGN'
node_modules/
dist/
*.log
.env
EOF

# ---------- 6️⃣  README ----------
cat > README.md <<'RD'
# Life OS Desktop Prototype

This repository contains a minimal Electron + React prototype that implements the Life OS UI described in the design document.
The app uses **OpenRouter** as the LLM backend, automatically generates a nightly dashboard, and offers a simple chat/command interface.

## Getting Started

```bash
npm install
npm start
```

> **NOTE:** Make sure you have a valid `OPENROUTER_API_KEY` in `.env` before starting.

## Features

- Chat interface with `[Thought]`, `[Daily]`, `[Project: …]`, etc. commands
- File explorer, Markdown editor/preview, and dashboard pane
- Built‑in nightly scheduler (runs at 00:00 UTC)
- Dark theme, system font, modern UI

## License

MIT
RD

# ---------- 7️⃣  Electron main process ----------
cat > src/main.js <<'MAIN'
const { app, BrowserWindow } = require('electron');
const path = require('path');
const fs = require('fs');
const cron = require('node-cron');
const { generateDashboard } = require('./renderer/utils/llm');

// LifeOS root (change if you moved it)
const LIFEOS_ROOT = path.join(app.getPath('home'), 'LifeOS');

// Ensure LifeOS folder exists
if (!fs.existsSync(LIFEOS_ROOT)) fs.mkdirSync(LIFEOS_ROOT, { recursive: true });

function createWindow() {
  const win = new BrowserWindow({
    width: 1200,
    height: 800,
    webPreferences: {
      nodeIntegration: true,
      contextIsolation: false
    }
  });

  win.loadFile(path.join(__dirname, 'renderer', 'index.html'));
}

app.whenReady().then(() => {
  createWindow();

  // Nightly dashboard generation
  cron.schedule('0 0 * * *', async () => {
    console.log('Generating dashboard...');
    const content = await generateDashboard(LIFEOS_ROOT);
    const pathToDash = path.join(LIFEOS_ROOT, 'Dashboard.md');
    fs.writeFileSync(pathToDash, content, 'utf8');
    console.log('Dashboard updated.');
  });

  app.on('activate', () => {
    if (BrowserWindow.getAllWindows().length === 0) createWindow();
  });
});

app.on('window-all-closed', () => {
  if (process.platform !== 'darwin') app.quit();
});
MAIN

# ---------- 8️⃣  Renderer / React ----------
cat > src/renderer/index.html <<'HTML'
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Life OS Desktop</title>
</head>
<body>
  <div id="root"></div>
  <script src="renderer.js"></script>
</body>
</html>
HTML

cat > src/renderer/renderer.js <<'REND'
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './components/App';
import './assets/styles.css';

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
REND

cat > src/renderer/components/App.js <<'APP'
import React, { useState, useEffect } from 'react';
import Sidebar from './Sidebar';
import Explorer from './Explorer';
import Editor from './Editor';
import Chat from './Chat';
import Dashboard from './Dashboard';
import { watchLifeOS, getAllFiles } from '../utils/fileWatcher';

export default function App() {
  const [files, setFiles] = useState([]);
  const [selected, setSelected] = useState(null);
  const [content, setContent] = useState('');

  useEffect(() => {
    const all = getAllFiles();
    setFiles(all);
    watchLifeOS(setFiles);
  }, []);

  const openFile = (path) => {
    setSelected(path);
    const fs = window.require('fs');
    setContent(fs.readFileSync(path, 'utf8'));
  };

  const updateContent = (newText) => {
    if (!selected) return;
    const fs = window.require('fs');
    fs.writeFileSync(selected, newText, 'utf8');
    setContent(newText);
  };

  return (
    <div className="app">
      <Sidebar files={files} onSelect={openFile} />
      <div className="main">
        <Explorer files={files} onSelect={openFile} />
        <Editor content={content} onChange={updateContent} />
        <Chat />
        <Dashboard />
      </div>
    </div>
  );
}
APP

cat > src/renderer/components/Sidebar.js <<'SID'
import React from 'react';
export default function Sidebar({ files, onSelect }) {
  return (
    <div className="sidebar">
      <h3 style={{ padding: '10px', margin: 0 }}>Life OS</h3>
      <ul style={{ listStyle: 'none', padding: 0 }}>
        {files.map(f => (
          <li key={f} style={{ padding: '5px 10px' }}>
            <button style={{
              background: 'none',
              border: 'none',
              color: '#e0e0e0',
              cursor: 'pointer',
              width: '100%',
              textAlign: 'left'
            }} onClick={() => onSelect(f)}>
              {f.replace(process.env.HOME, '~')}
            </button>
          </li>
        ))}
      </ul>
    </div>
  );
}
SID

cat > src/renderer/components/Explorer.js <<'EXP'
import React from 'react';
export default function Explorer({ files, onSelect }) {
  const buildTree = () => {
    const root = { name: 'LifeOS', children: [] };
    files.forEach(p => {
      const parts = p.replace(process.env.HOME, '~').split('/');
      let node = root;
      parts.forEach(part => {
        if (!node.children) node.children = [];
        let child = node.children.find(c => c.name === part);
        if (!child) {
          child = { name: part, children: [] };
          node.children.push(child);
        }
        node = child;
      });
    });
    return root;
  };

  return (
    <div className="explorer" style={{ height: '200px' }}>
      {/* Simple plain list for demo */}
      <ul style={{ listStyle: 'none', padding: 0 }}>
        {buildTree().children.map(n => (
          <li key={n.name}>
            <strong>{n.name}</strong>
            <ul style={{ listStyle: 'none', paddingLeft: '15px' }}>
              {n.children.map(c => (
                <li key={c.name}>
                  <button onClick={() => onSelect(c.name)} style={{background:'none',border:'none',color:'#e0e0e0',cursor:'pointer'}}>
                    {c.name}
                  </button>
                </li>
              ))}
            </ul>
          </li>
        ))}
      </ul>
    </div>
  );
}
EXP

cat > src/renderer/components/Editor.js <<'EDT'
import React from 'react';
export default function Editor({ content, onChange }) {
  return (
    <div className="editor">
      <textarea value={content} onChange={e => onChange(e.target.value)} />
    </div>
  );
}
EDT

cat > src/renderer/components/Chat.js <<'CHT'
import React, { useState } from 'react';
import { sendToLLM } from '../utils/llm';

export default function Chat() {
  const [input, setInput] = useState('');
  const [messages, setMessages] = useState([]);

  const handleSend = async () => {
    if (!input.trim()) return;
    const userMsg = input;
    setMessages(m => [...m, {role:'user', text:userMsg}]);
    setInput('');
    const resp = await sendToLLM(userMsg);
    setMessages(m => [...m, {role:'assistant', text:resp}]);

    // Very simple command handling (Thought example)
    if (userMsg.startsWith('[Thought]')) {
      const note = `# Thought – ${new Date().toISOString().slice(0,10)}\n\n${userMsg.slice(9).trim()}\n`;
      const fs = window.require('fs');
      const path = window.require('path');
      const dir = path.join(process.env.HOME, 'LifeOS', 'Notes', 'Fleeting');
      if (!fs.existsSync(dir)) fs.mkdirSync(dir, {recursive:true});
      const file = path.join(dir, `Thought-${Date.now()}.md`);
      fs.writeFileSync(file, note, 'utf8');
    }
    // Add handlers for [Daily], [Project:], etc. in a similar way
  };

  return (
    <div className="chat">
      <h3>Chat</h3>
      <div style={{maxHeight:'200px',overflowY:'auto',background:'#2c2c2c',padding:'5px'}}>
        {messages.map((m,i)=>(
          <div key={i} style={{marginBottom:'5px'}}>
            <strong>{m.role}:</strong> {m.text}
          </div>
        ))}
      </div>
      <input
        type="text"
        value={input}
        onChange={e=>setInput(e.target.value)}
        onKeyDown={e=>e.key==='Enter'&&handleSend()}
        placeholder="Type a command or chat…"
      />
    </div>
  );
}
CHT

cat > src/renderer/components/Dashboard.js <<'DASH'
import React, { useEffect, useState } from 'react';
import ReactMarkdown from 'react-markdown';
import { getDashboard } from '../utils/markdown';

export default function Dashboard() {
  const [content, setContent] = useState('# Dashboard\nLoading…');

  useEffect(() => {
    const load = async () => {
      const dash = await getDashboard();
      setContent(dash);
    };
    load();
  }, []);

  return (
    <div className="dashboard">
      <h3>Dashboard</h3>
      <ReactMarkdown>{content}</ReactMarkdown>
    </div>
  );
}
DASH

cat > src/renderer/assets/styles.css <<'CSS'
/* Dark theme, system font */
body, html, .app {
  margin: 0;
  padding: 0;
  height: 100%;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  background: #1e1e1e;
  color: #e0e0e0;
}
.app { display:flex; height:100%; }
.sidebar { width:200px; background:#2c2c2c; overflow-y:auto; }
.main { flex:1; display:flex; flex-direction:column; }
.explorer, .editor, .chat, .dashboard { flex:1; overflow-y:auto; padding:10px; border-bottom:1px solid #444; }
.editor textarea { width:100%; height:100%; background:#1e1e1e; color:#e0e0e0; border:none; resize:none; font-family:inherit; font-size:14px; }
.chat input { width:100%; padding:8px; background:#2c2c2c; border:none; color:#e0e0e0; }
.dashboard { background:#2c2c2c; }
CSS

# ---------- 9️⃣  Utilities ----------
cat > src/renderer/utils/llm.js <<'LLM'
const axios = require('axios');
const fs = require('fs');
const path = require('path');

const OPENROUTER_API_KEY = process.env.OPENROUTER_API_KEY;
const LIFEOS_ROOT = path.join(process.env.HOME, 'LifeOS');

async function sendToLLM(message) {
  const payload = {
    model: 'gpt-4o-mini',
    messages: [{role:'user', content:message}],
    temperature: 0.7,
    max_tokens: 500
  };
  const res = await axios.post('https://openrouter.ai/api/v1/chat/completions', payload, {
    headers: {
      Authorization: `Bearer ${OPENROUTER_API_KEY}`,
      'Content-Type': 'application/json'
    }
  });
  return res.data.choices[0].message.content.trim();
}

async function generateDashboard(root) {
  const prompt = `
Generate a Markdown dashboard for the current week.
Include:
- Energy (1‑10) & Mood (1‑10)
- One‑Thing (top priority) – pull from Projects/Active
- Habit streaks – from Habits folder
- Pending tasks – from Tasks folder with status IN‑PROGRESS
- Short reminder of next week’s focus
`;
  return await sendToLLM(prompt);
}

async function getDashboard() {
  const dashPath = path.join(LIFEOS_ROOT, 'Dashboard.md');
  if (!fs.existsSync(dashPath)) return '# Dashboard\nNo data yet.';
  return fs.readFileSync(dashPath, 'utf8');
}

module.exports = { sendToLLM, generateDashboard, getDashboard };
LLM

cat > src/renderer/utils/fileWatcher.js <<'WATCH'
const chokidar = require('chokidar');
const path = require('path');
const fs = require('fs');

const LIFEOS_ROOT = path.join(process.env.HOME, 'LifeOS');

function getAllFiles(dir = LIFEOS_ROOT, list = []) {
  const entries = fs.readdirSync(dir);
  entries.forEach(entry => {
    const full = path.join(dir, entry);
    if (fs.statSync(full).isDirectory()) {
      getAllFiles(full, list);
    } else {
      list.push(full);
    }
  });
  return list;
}

function watchLifeOS(setFiles) {
  const watcher = chokidar.watch(LIFEOS_ROOT, { ignoreInitial: true });
  watcher.on('all', () => {
    const all = getAllFiles();
    setFiles(all);
  });
}

module.exports = { getAllFiles, watchLifeOS };
WATCH

cat > src/renderer/utils/markdown.js <<'MARK'
const { getDashboard } = require('./llm');
module.exports = { getDashboard };
MARK

# ---------- 10️⃣  Done ----------
echo "✅ LifeOS Desktop prototype created at $ROOT_DIR"
echo "Next steps:"
echo "  1. cd $ROOT_DIR"
echo "  2. npm install"
echo "  3. npm start"
EOF

# Make the script executable
chmod +x setup_lifeos.sh

# Run it (optional – you can run the script manually later)
# ./setup_lifeos.sh

echo "Script 'setup_lifeos.sh' has been created in your current directory."
echo "Run it with:"
echo "  chmod +x setup_lifeos.sh"
echo "  ./setup_lifeos.sh"
echo "After the script finishes, change into the created folder, install dependencies, and start the app:"
echo "  cd LifeOS-Desktop"
echo "  npm install"
echo "  npm start"
```

### How to use

1. **Create the script**
   Copy the entire block above into a file named `setup_lifeos.sh` on your machine.

2. **Make it executable**
   ```bash
   chmod +x setup_lifeos.sh
   ```

3. **Run it**
   ```bash
   ./setup_lifeos.sh
   ```

   The script will:

   * Create `LifeOS-Desktop` in your home directory.
   * Write all the necessary files.
   * Add a placeholder `.env` (replace `sk-xxxxxxxxxxxxxxxxxxxx` with your real OpenRouter key).
   * Output a short “next steps” message.

4. **Start the prototype**
   ```bash
   cd LifeOS-Desktop
   npm install
   npm start
   ```

That’s it! Your desktop app should launch, showing the sidebar, explorer, editor, chat, and dashboard.

> **Tip** – If you’d like to keep the script handy for future updates, you can commit it to a Git repo.

Let me know if you hit any snags or want to add more features (e.g., a “Schedule” tab, Google Calendar integration, etc.).
